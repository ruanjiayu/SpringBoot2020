package com.fun.uncle.springboot2020.utils;

import com.alibaba.fastjson.JSON;
import com.fun.uncle.springboot2020.dto.PositionDTO;
import com.fun.uncle.springboot2020.dto.Question;
import com.fun.uncle.springboot2020.dto.QuestionPagePic;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

/**
 * @Description: 坐标分类器
 * @Author: summer
 * @CreateDate: 2025/1/2 18:15
 * @Version: 1.0.0
 */
public class CoordinateClassifierV2 {

    //    private final static String str = "{\"imgUrl\":\"https://wb.vod.126.net/courseware/doc/25251963/854446/9JorAxxn/1.jpg\",\"orgHeight\":2336,\"orgWidth\":3352,\"questionList\":[{\"confidence\":0.9999982714653015,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_45cefbb334fb4f7ea96c6be3fb4ec793.jpg\",\"ocrText\":\"3. [2021·南京外国语学校高一月考] 已知 \\\\(A=\\\\{x|x<-2\\\\) 或 \\\\(x>3\\\\}\\\\)，\\\\(B=\\\\{x|a \\\\leqslant x \\\\leqslant 2a-1\\\\}\\\\)，若 \\\\(A \\\\cup B=A\\\\)，则实数 \\\\(a\\\\) 的取值范围为 （ ）\\nA. \\\\(\\\\left(-\\\\infty, -\\\\frac{1}{2}\\\\right) \\\\cup (3, +\\\\infty)\\\\)\\nB. \\\\((-∞, 1) \\\\cup (3, +∞)\\\\)\\nC. \\\\(\\\\left(-\\\\infty, -\\\\frac{1}{2}\\\\right) \\\\cup (1, +\\\\infty)\\\\)\\nD. \\\\((-∞, 1] \\\\cup [3, +∞)\\\\)\",\"orgHeight\":295,\"orgWidth\":1002,\"posList\":[[{\"x\":214.958251953125,\"y\":1103.508544921875},{\"x\":1217.178466796875,\"y\":1398.9671630859375}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9757061004638672,\"posList\":[[{\"x\":7.826513767242432,\"y\":3.421651840209961},{\"x\":40.161460876464844,\"y\":40.17622375488281}]]}]},{\"confidence\":0.9999977946281433,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_023af77d33ae4c00b5b10dd55af30cf0.jpg\",\"ocrText\":\"8. [2021·华东师大附中高一月考] 已知函数 \\\\( f(x) = 2\\\\cos^2 \\\\left( \\\\frac{\\\\omega x}{2} - \\\\frac{\\\\pi}{12} \\\\right) + 1 (\\\\omega > 0) \\\\) 的最小正周期为 \\\\(\\\\pi\\\\)，若 \\\\( m, n \\\\in [-2\\\\pi, 2\\\\pi] \\\\)，且 \\\\( f(m) \\\\cdot f(n) = 9 \\\\)，则 \\\\( m - n \\\\) 的最大值为\\nA. \\\\( 2\\\\pi \\\\)\\nB. \\\\( \\\\frac{5\\\\pi}{2} \\\\)\\nC. \\\\( 3\\\\pi \\\\)\\nD. \\\\( \\\\frac{7\\\\pi}{2} \\\\)\",\"orgHeight\":265,\"orgWidth\":1001,\"posList\":[[{\"x\":1287.9129638671875,\"y\":726.2968139648438},{\"x\":2289.218017578125,\"y\":991.3545532226562}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9948091506958008,\"posList\":[[{\"x\":7.311802387237549,\"y\":4.732553482055664},{\"x\":37.19770812988281,\"y\":36.68886184692383}]]}]},{\"confidence\":0.999997615814209,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_928ebeefbffd447fbed9d6e69c00221c.jpg\",\"ocrText\":\"6. [2021·江西重点中学协作体联考] 已知单位圆上第一象限的一点 \\\\(P\\\\) 沿圆周逆时针旋转 \\\\(\\\\frac{\\\\pi}{3}\\\\) 到点 \\\\(Q\\\\)，若点 \\\\(Q\\\\) 的横坐标为 \\\\(-\\\\frac{1}{2}\\\\)，则点 \\\\(P\\\\) 的横坐标为 ( )\\nA. \\\\(\\\\frac{1}{3}\\\\)\\nB. \\\\(\\\\frac{1}{2}\\\\)\\nC. \\\\(\\\\frac{\\\\sqrt{2}}{2}\\\\)\\nD. \\\\(\\\\frac{\\\\sqrt{3}}{2}\\\\)\",\"orgHeight\":237,\"orgWidth\":1003,\"posList\":[[{\"x\":1291.4873046875,\"y\":142.28091430664062},{\"x\":2295.423583984375,\"y\":379.3028259277344}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9636051654815674,\"posList\":[[{\"x\":8.4298734664917,\"y\":13.924883842468262},{\"x\":42.826934814453125,\"y\":48.73244857788086}]]}]},{\"confidence\":0.9999973177909851,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_beab7c879c5348beb2a642af58fcde06.jpg\",\"ocrText\":\"5. 已知偶函数 \\\\( f(x) \\\\) 在 \\\\([0, 2]\\\\) 上单调递减，若 \\\\( a = f(0.5^4) \\\\)，\\\\( b = f(\\\\log_{\\\\frac{1}{2}} 4) \\\\)，\\\\( c = f(2^{0.6}) \\\\)，则 \\\\( a, b, c \\\\) 的大小关系是\\nA. \\\\( a > b > c \\\\)\\nB. \\\\( c > a > b \\\\)\\nC. \\\\( a > c > b \\\\)\\nD. \\\\( b > c > a \\\\)\",\"orgHeight\":164,\"orgWidth\":999,\"posList\":[[{\"x\":210.1546630859375,\"y\":2063.20556640625},{\"x\":1210.0628662109375,\"y\":2227.656005859375}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9937014579772949,\"posList\":[[{\"x\":4.09895658493042,\"y\":2.0703320503234863},{\"x\":32.31782531738281,\"y\":31.49567413330078}]]}]},{\"confidence\":0.999995231628418,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_a46984a68daa4fa8b37346a70e31a841.jpg\",\"ocrText\":\"2. [2021·北京人大附中高一月考] 设命题 \\\\( p: \\\\forall x \\\\in \\\\mathbb{R}, x^2 - x + \\\\frac{1}{4} \\\\geqslant 0 \\\\)，则 \\\\( \\\\neg p \\\\) 为\\nA. \\\\( \\\\exists x \\\\in \\\\mathbb{R}, x^2 - x + \\\\frac{1}{4} \\\\geqslant 0 \\\\)\\nB. \\\\( \\\\exists x \\\\in \\\\mathbb{R}, x^2 - x + \\\\frac{1}{4} < 0 \\\\)\\nC. \\\\( \\\\exists x \\\\in \\\\mathbb{R}, x^2 - x + \\\\frac{1}{4} \\\\leqslant 0 \\\\)\\nD. \\\\( \\\\forall x \\\\in \\\\mathbb{R}, x^2 - x + \\\\frac{1}{4} < 0 \\\\)\",\"orgHeight\":237,\"orgWidth\":1011,\"posList\":[[{\"x\":212.033935546875,\"y\":862.6162109375},{\"x\":1223.1929931640625,\"y\":1100.5133056640625}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9824137091636658,\"posList\":[[{\"x\":11.289778709411621,\"y\":9.179390907287598},{\"x\":45.91084289550781,\"y\":43.30279541015625}]]}]},{\"confidence\":0.9999945163726807,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_b33a00b62b2a4670a38244dba9fa1c49.jpg\",\"ocrText\":\"1. cos \\\\(\\\\frac{16\\\\pi}{3}\\\\) 的值是\\n   ( )\\n   \\n   A. \\\\(\\\\frac{1}{2}\\\\)\\n   \\n   B. \\\\(-\\\\frac{1}{2}\\\\)\\n   \\n   C. \\\\(\\\\frac{\\\\sqrt{3}}{2}\\\\)\\n   \\n   D. \\\\(-\\\\frac{\\\\sqrt{3}}{2}\\\\)\",\"orgHeight\":219,\"orgWidth\":1005,\"posList\":[[{\"x\":216.82371520996094,\"y\":640.1158447265625},{\"x\":1221.87353515625,\"y\":859.1377563476562}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9823415279388428,\"posList\":[[{\"x\":11.415287017822266,\"y\":9.238746643066406},{\"x\":45.34426498413086,\"y\":40.577880859375}]]}]},{\"confidence\":0.9999936819076538,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_c71ed91a40e24e4faba432a6eb663aa4.jpg\",\"ocrText\":\"2021·湖北大冶一中高一月考〕中国清朝数学家李善兰在1859年翻译《代数学》中首次将“function”译作“函数”，沿用至今，为什么这么翻译，书中解释说“凡此变数中函彼变数者，则此为彼之函数”。\\n1930年美国人给出了我们课本中所学的集合论的函数定义。已知集合M={-1, 1, 2, 4}, N={1, 2, 4, 16}，给出下列四个对应关系，请由函数定义判断，其中能构成从M到N的函数的是（ ）\\nA. y=2x\\nB. y=x+2\\nC. y=2^|x|\\nD. y=x^2\",\"orgHeight\":300,\"orgWidth\":1008,\"posList\":[[{\"x\":1288.3533935546875,\"y\":1501.04541015625},{\"x\":2296.66845703125,\"y\":1801.8663330078125}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.986160933971405,\"posList\":[[{\"x\":1.24260413646698,\"y\":3.60018253326416},{\"x\":43.11091613769531,\"y\":35.000572204589844}]]}]},{\"confidence\":0.9999930262565613,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_00181258e8604345b78b74dcf336c7d0.jpg\",\"ocrText\":\"7. [2021 · 华中师大附中期中] 渔民出海打鱼，为了保证获得的鱼新鲜，鱼被打上船后，要在最短的时间内将其分拣、冷藏，若不及时处理，打上来的鱼会很快失去新鲜度。已知某种鱼失去的新鲜度 \\\\( h \\\\) 与其出水后时间 \\\\( t \\\\) (分钟) 满足的函数关系式为 \\\\( h = m \\\\cdot a^t \\\\)。若出水后 10 分钟，这种鱼失去的新鲜度为 10%，出水后 20 分钟，这种鱼失去的新鲜度为 20%。那么若不及时处理，打上来的这种鱼失去全部新鲜度所需的时间约为 (\\\\(\\\\lg 2 \\\\approx 0.3\\\\))\\nA. 33 分钟\\nB. 43 分钟\\nC. 50 分钟\\nD. 56 分钟\",\"orgHeight\":334,\"orgWidth\":1002,\"posList\":[[{\"x\":1291.0169677734375,\"y\":384.3819885253906},{\"x\":2293.822265625,\"y\":718.7802734375}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9900027513504028,\"posList\":[[{\"x\":7.337839126586914,\"y\":0.7021730542182922},{\"x\":35.699668884277344,\"y\":30.83190155029297}]]}]},{\"confidence\":0.9999922513961792,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_86d03237ea234b9fa0252bb7eb12174a.jpg\",\"ocrText\":\"11. [2021·哈尔滨九中高一期末] 已知函数 \\\\( f(x) = \\\\sin(3x + \\\\varphi) \\\\left( -\\\\frac{\\\\pi}{2} < \\\\varphi < \\\\frac{\\\\pi}{2} \\\\right) \\\\) 的图像关于直线 \\\\( x = \\\\frac{\\\\pi}{4} \\\\) 对称，则\\nA. \\\\( f(0) = \\\\frac{\\\\sqrt{2}}{2} \\\\)\\nB. 函数 \\\\( f(x) \\\\) 的图像关于点 \\\\( \\\\left( \\\\frac{\\\\pi}{12}, 0 \\\\right) \\\\) 对称\\nC. 函数 \\\\( f(x) \\\\) 在 \\\\( \\\\left( \\\\frac{\\\\pi}{12}, \\\\frac{\\\\pi}{3} \\\\right) \\\\) 上单调递增\",\"orgHeight\":362,\"orgWidth\":1007,\"posList\":[[{\"x\":1281.86376953125,\"y\":1805.808837890625},{\"x\":2289.224853515625,\"y\":2167.942626953125}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.984955906867981,\"posList\":[[{\"x\":4.468710422515869,\"y\":8.876317024230957},{\"x\":47.573883056640625,\"y\":41.1517448425293}]]}]},{\"confidence\":0.9999915361404419,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_1a3563cdf9864683840deaeac4bbad5e.jpg\",\"ocrText\":\"4. 2019 年 1 月 1 日起我国实施了个人所得税的新政策，其政策的主要内容包括：(1) 个税起征点为 5000 元。(2) 每月应纳税所得额（含税）= 收入 - 一个税起征点 - 专项附加扣除。(3) 专项附加扣除包括：①赡养老人费用，②子女教育费用，③继续教育费用，④大病医疗费用等。其中前两项的扣除标准为：①赡养老人费用：纳税人属于独生子女的，每月扣除 2000 元；纳税人属于非独生子女的，与其兄弟姐妹分摊每月 2000 元的扣除额度，其中每人分摊的扣除额度不得超过 1000 元。②子女教育费用：每个子女每月扣除 1000 元。\\n新的个税政策的税率表部分内容如下：\\n| 级数 | 一级 | 二级 | 三级 | … |\\n|------|------|------|------|----|\\n| 每月应纳税所得额 x 元（含税） | \\\\( x \\\\leq 3000 \\\\) | \\\\( 3000 < x \\\\leq 12000 \\\\) | \\\\( 12000 < x \\\\leq 25000 \\\\) | … |\\n| 税率（%） | 3 | 10 | 20 | … |\\n已知李某为独生子，他某月的收入为 19000 元，他有一个在上小学的儿子，需赡养老人（除此之外无其他专项附加扣除），则他该月应缴纳的个税金额为\\nA. 570 元\\nB. 890 元\\nC. 1100 元\\nD. 1900 元\",\"orgHeight\":670,\"orgWidth\":1015,\"posList\":[[{\"x\":214.95535278320312,\"y\":1396.63671875},{\"x\":1230.218017578125,\"y\":2066.750244140625}]],\"questionAnalysis\":{\"category\":\"复合题\",\"subQuestionList\":[{\"info\":0,\"type\":\"简答题\"},{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9181615114212036,\"posList\":[[{\"x\":4.1906304359436035,\"y\":2.0706753730773926},{\"x\":37.44453811645508,\"y\":35.77117919921875}]]}]},{\"confidence\":0.9999885559082031,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_0490c91dc12d4db79aa5c55f83265c10.jpg\",\"ocrText\":\"二、选择题：本题共4小题，每小题5分，共20分。在每小题给出的选项中，有多项符合题目要求。全部选对的得5分，部分选对的得2分，有选错的得0分。\\n9. 为了得到函数 \\\\( y = \\\\cos \\\\left( 2x + \\\\frac{\\\\pi}{4} \\\\right) \\\\) 的图像，只要把函数 \\\\( y = \\\\cos x \\\\) 图像上的\\nA. 所有点向左平移 \\\\(\\\\frac{\\\\pi}{4}\\\\) 个单位长度，再将横坐标变为原来的2倍\\nB. 所有点向左平移 \\\\(\\\\frac{\\\\pi}{4}\\\\) 个单位长度，再将横坐标变为原来的 \\\\(\\\\frac{1}{2}\\\\)\\nC. 所有点的横坐标变为原来的 \\\\(\\\\frac{1}{2}\\\\)，再向左平移 \\\\(\\\\frac{\\\\pi}{8}\\\\) 个单位长度\\nD. 所有点的横坐标变为原来的 \\\\(\\\\frac{1}{2}\\\\)，再向左平移 \\\\(\\\\frac{\\\\pi}{4}\\\\) 个单位长度\",\"orgHeight\":497,\"orgWidth\":1014,\"posList\":[[{\"x\":1280.010986328125,\"y\":996.2028198242188},{\"x\":2294.523193359375,\"y\":1493.387939453125}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9621462225914001,\"posList\":[[{\"x\":13.093448638916016,\"y\":4.954531669616699},{\"x\":58.226192474365234,\"y\":40.56195068359375}]]},{\"category\":\"NUMBER\",\"confidence\":0.9588226079940796,\"posList\":[[{\"x\":8.18017578125,\"y\":129.94821166992188},{\"x\":39.7717399597168,\"y\":165.55177307128906}]]}]},{\"confidence\":0.9984209537506104,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_56b103aa7fcb4f41bdd8c0d22aa5da73.jpg\",\"ocrText\":\"三、填空题：本题共4小题，每小题5分，共20分。\\n13. 一弹簧振子的位移y与时间t的函数关系式为 \\\\( y = A \\\\sin(\\\\omega t + \\\\varphi) \\\\) (\\\\( A > 0, \\\\omega > 0 \\\\))，若弹簧振子运动的振幅为3，最小正周期为 \\\\(\\\\frac{2\\\\pi}{7}\\\\)，初相为 \\\\(\\\\frac{\\\\pi}{6}\\\\)，则这个函数的解析式为 _______________。\\n14. [2021·天津一中高一期末] \\\\(- \\\\frac{1}{2} + \\\\frac{\\\\sqrt{3}}{2} =\\\\)\",\"orgHeight\":216,\"orgWidth\":972,\"posList\":[[{\"x\":2365.77294921875,\"y\":742.7628784179688},{\"x\":3338.7529296875,\"y\":959.6422119140625}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":0,\"type\":\"填空题\"},{\"info\":0,\"type\":\"填空题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9996823072433472,\"posList\":[[{\"x\":0.15337857604026794,\"y\":30.83201789855957},{\"x\":40.15333557128906,\"y\":60.018131256103516}]]},{\"category\":\"NUMBER\",\"confidence\":0.9961947202682495,\"posList\":[[{\"x\":1.3552557229995728,\"y\":0.0},{\"x\":45.30928421020508,\"y\":22.10413932800293}]]},{\"category\":\"NUMBER\",\"confidence\":0.05992713198065758,\"posList\":[[{\"x\":0.0,\"y\":199.4750213623047},{\"x\":17.023088455200195,\"y\":218.0}]]}]},{\"confidence\":0.9981018900871277,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_0de46df7291d4314a754472775bd34fe.jpg\",\"ocrText\":\"17. (10 分) 在条件：① $\\\\frac{2\\\\sin A - \\\\cos A}{3\\\\sin A + 4\\\\cos A} = \\\\frac{1}{7}$，② $4\\\\sin^2 A = 4\\\\cos A + 1$，③ $\\\\sin A \\\\cdot \\\\cos A \\\\cdot \\\\tan A = \\\\frac{1}{2}$ 中任选一个，补充在下面的问题中，并求解。\\n已知角 $A$ 为锐角，________。\\n(1) 求角 $A$ 的大小；\\n(2) 求 $\\\\sin(\\\\pi + A)\\\\cos(\\\\frac{2021\\\\pi}{2} - A)$ 的值。\\n（注：如果选择多个条件分别解答，按第一个解答计分）\",\"orgHeight\":382,\"orgWidth\":983,\"posList\":[[{\"x\":2347.74072265625,\"y\":1248.35595703125},{\"x\":3331.041259765625,\"y\":1630.8699951171875}]],\"questionAnalysis\":{\"category\":\"复合题\",\"subQuestionList\":[{\"info\":0,\"type\":\"填空题\"},{\"info\":0,\"type\":\"简答题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9975377917289734,\"posList\":[[{\"x\":71.28125762939453,\"y\":273.43914794921875},{\"x\":116.86959838867188,\"y\":309.2533264160156}]]},{\"category\":\"NUMBER\",\"confidence\":0.9965306520462036,\"posList\":[[{\"x\":71.33335876464844,\"y\":220.385009765625},{\"x\":117.47098541259766,\"y\":254.1243438720703}]]},{\"category\":\"NUMBER\",\"confidence\":0.8102643489837646,\"posList\":[[{\"x\":9.77869701385498,\"y\":18.717565536499023},{\"x\":55.95417022705078,\"y\":52.122798919677734}]]},{\"category\":\"NUMBER\",\"confidence\":0.07326583564281464,\"posList\":[[{\"x\":75.26506805419922,\"y\":22.968338012695312},{\"x\":132.99203491210938,\"y\":53.96794891357422}]]}]},{\"confidence\":0.9920586943626404,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_bc605f87dd2a4f53ba8fd9ce074203d6.jpg\",\"ocrText\":\"B. 函数 \\\\( f(x) \\\\) 的图像与直线 \\\\( y = 0 \\\\) 有四个公共点\\n请将选择题答案填入下表：\\n| 题号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 总分 |\\n|------|---|---|---|---|---|---|---|---|------|\\n| 答案 |   |   |   |   |   |   |   |   |      |\\n| 题号 | 9 | 10 | 11 | 12 |    |    |    |    |      |\\n| 答案 |   |    |    |    |    |    |    |    |      |\\n第 II 卷 （非选择题 共 90 分）\",\"orgHeight\":310,\"orgWidth\":936,\"posList\":[[{\"x\":2365.770263671875,\"y\":410.4070129394531},{\"x\":3302.22216796875,\"y\":720.8588256835938}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"PICTURE\",\"confidence\":0.5768181681632996,\"posList\":[[{\"x\":80.28854370117188,\"y\":49.993560791015625},{\"x\":883.5748291015625,\"y\":309.4060974121094}]]}]},{\"confidence\":0.9887158274650574,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_9ee36b3af65f4d35bdd32fb5c8042de3.jpg\",\"ocrText\":\"D. 若 \\\\( |f(x_1) - f(x_2)| = 2 \\\\)，则 \\\\( |x_1 - x_2| \\\\) 的最小值为 \\\\( \\\\frac{\\\\pi}{3} \\\\)\",\"orgHeight\":51,\"orgWidth\":766,\"posList\":[[{\"x\":1328.6976318359375,\"y\":2175.751220703125},{\"x\":2095.183837890625,\"y\":2227.385009765625}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":0,\"type\":\"判断题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.7640241980552673,\"posList\":[[{\"x\":12.027629852294922,\"y\":2.0512020587921143},{\"x\":45.96730422973633,\"y\":31.471452713012695}]]}]},{\"confidence\":0.9683935046195984,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_764ded62cf9a45abbec985da54e34847.jpg\",\"ocrText\":\"12. 定义一种运算: \\\\( a \\\\otimes b = \\\\begin{cases} \\na, & a \\\\geqslant b \\\\\\\\\\nb, & a < b \\n\\\\end{cases} \\\\)，设 \\\\( f(x) = (5 + 2x - x^2) \\\\otimes |x - 1| \\\\)，则下列结论正确的是\\nA. 函数 \\\\( f(x) \\\\) 的图像关于直线 \\\\( x = 1 \\\\) 对称\\nB. 函数 \\\\( f(x) \\\\) 的值域是 \\\\([2, +\\\\infty)\\\\)\\nC. 函数 \\\\( f(x) \\\\) 的单调递减区间是 \\\\((-∞, -1], [1, 3]\\\\)\\nD. 函数 \\\\( f(x) \\\\) 的图像与直线 \\\\( y = 6 \\\\) 有四个公共点\",\"orgHeight\":244,\"orgWidth\":943,\"posList\":[[{\"x\":2379.09228515625,\"y\":162.60630798339844},{\"x\":3323.049560546875,\"y\":407.18829345703125}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.6595298051834106,\"posList\":[[{\"x\":0.0,\"y\":23.42632293701172},{\"x\":34.781795501708984,\"y\":53.96150588989258}]]}]},{\"confidence\":0.4775228500366211,\"imgUrl\":\"https://www.wy.com/test/summer/2025/01/02/7273635660113956864QUESTION0_33d8c13182be43edae551a5220235104.jpg\",\"ocrText\":\"15. 已知幂函数 \\\\( f(x) = x^{m+2} \\\\) 的图像过点 (2, 8)，则使 \\\\( f(k^2 + 1) + f(2k - 4) \\\\leq 0 \\\\) 成立的实数 \\\\( k \\\\) 的取值范围是 ________。\\n16. 已知函数 \\\\( f(x) = \\\\frac{x-2}{x+2} \\\\)，若函数 \\\\( y = ||f(|x|)| - t| \\\\) 在 \\\\([-1, 2]\\\\) 上的最大值为 2，则实数 \\\\( t \\\\) 的值为 ________。\",\"orgHeight\":167,\"orgWidth\":987,\"posList\":[[{\"x\":2351.735595703125,\"y\":992.2818603515625},{\"x\":3339.259521484375,\"y\":1160.1158447265625}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":0,\"type\":\"填空题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9999485015869141,\"posList\":[[{\"x\":8.68651008605957,\"y\":92.74891662597656},{\"x\":53.2194709777832,\"y\":126.62117004394531}]]},{\"category\":\"NUMBER\",\"confidence\":0.997144341468811,\"posList\":[[{\"x\":12.080060005187988,\"y\":4.873570919036865},{\"x\":54.1338996887207,\"y\":35.04738235473633}]]},{\"category\":\"NUMBER\",\"confidence\":0.22115102410316467,\"posList\":[[{\"x\":65.78730773925781,\"y\":41.9688606262207},{\"x\":101.59647369384766,\"y\":72.56922912597656}]]}]}]}";
    private final static String str = "{\"imgUrl\":\"https://wb.vod.126.net/courseware/doc/25251963/853347/5DbMok2V/1.jpg\",\"orgHeight\":2336,\"orgWidth\":1652,\"questionList\":[{\"confidence\":0.999998927116394,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_6b859472d88e49ebae47510ff69aeea7.jpg\",\"ocrText\":\"8. 纳米炭粉是指直径小于 100 nm 的碳单质材料。下列有关纳米炭粉的说法不正确的是\\n                (   )\\nA. 纳米炭粉与普通木炭的化学性质完全不同\\nB. 相同条件下，纳米炭粉的吸附能力比木炭强\\nC. 纳米炭粉与水形成的分散系较稳定\\nD. 纳米炭粉与水形成的分散系能产生丁达尔效应\",\"orgHeight\":247,\"orgWidth\":710,\"posList\":[[{\"x\":829.4022216796875,\"y\":1004.3375854492188},{\"x\":1539.7060546875,\"y\":1252.1505126953125}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9801285266876221,\"posList\":[[{\"x\":6.0326337814331055,\"y\":0.0},{\"x\":35.11929702758789,\"y\":28.212844848632812}]]}]},{\"confidence\":0.9999977946281433,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_a576ed5ad4e343a6875e9c8a27f8b57a.jpg\",\"ocrText\":\"7. 实验室里的药品要求分类存放，现有4个药品橱，已经存放了以下药品：\\n| 药品橱 | 甲 | 乙 | 丙 | 丁 |\\n| --- | --- | --- | --- | --- |\\n| 药品 | 盐酸 硫酸 | 氢氧化钠 氢氧化钙 | 氯化钠 磷酸钾 | 铜、锌、红磷、硫 |\\n实验室新购进两瓶纯碱，应该将这些纯碱放在（ ）\\nA. 甲\\nB. 乙\\nC. 丙\\nD. 丁\",\"orgHeight\":333,\"orgWidth\":721,\"posList\":[[{\"x\":833.3209228515625,\"y\":662.2379150390625},{\"x\":1554.3482666015625,\"y\":995.4762573242188}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.980320394039154,\"posList\":[[{\"x\":9.259469032287598,\"y\":7.724549770355225},{\"x\":37.29004669189453,\"y\":37.310787200927734}]]}]},{\"confidence\":0.9999973177909851,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_73f9aa89cea145e0b113a9677940c064.jpg\",\"ocrText\":\"6. 下列有关物质分类或归类正确的一组是（　　）\\n①液氧、干冰、冰醋酸均为化合物 ②氨水、盐酸、稀硫酸均为混合物 ③胆矾、铜、纯碱均为纯净物 ④牛奶、豆浆、石灰水均为胶体 ⑤Na_{2}O、Na_{2}CO_{3}、Na_{2}SiO_{3} 均为钠盐\\nA. ①②\\nB. ②③\\nC. ③④\\nD. ②③⑤\",\"orgHeight\":300,\"orgWidth\":708,\"posList\":[[{\"x\":76.05741882324219,\"y\":1913.4188232421875},{\"x\":784.3446044921875,\"y\":2214.3046875}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.975143551826477,\"posList\":[[{\"x\":3.318721294403076,\"y\":0.9305236339569092},{\"x\":30.685670852661133,\"y\":32.06532669067383}]]}]},{\"confidence\":0.9999970197677612,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_14f1d67b8986487d9bc134a8903a61db.jpg\",\"ocrText\":\"10. 朱自清先生在《荷塘月色》中写道：“薄薄的青雾浮起在荷塘里……月光是隔了树照过来的，高处丛生的灌木，落下参差的斑驳的黑影……”月光穿过薄雾所形成的种种美景的本质原因是\\n（　　）\\nA. 空气中的小水滴颗粒直径约为 \\\\(10^{-9} \\\\sim 10^{-7}\\\\) m\\nB. 光是一种胶体\\nC. 雾是一种胶体\\nD. 发生了丁达尔效应\",\"orgHeight\":335,\"orgWidth\":704,\"posList\":[[{\"x\":823.3551025390625,\"y\":1888.9556884765625},{\"x\":1527.7996826171875,\"y\":2224.615478515625}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9981309771537781,\"posList\":[[{\"x\":0.3237644135951996,\"y\":0.20971767604351044},{\"x\":40.11901092529297,\"y\":26.634286880493164}]]}]},{\"confidence\":0.9999960660934448,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_6abbc39abb324e0e84270ac02ae45310.jpg\",\"ocrText\":\"2. [2021·浙江淳安汾口中学月考] 下列各组物质中，按单质、化合物、混合物顺序排列的是 ( )\\nA. 铁、四氧化三铁、冰水混合物\\nB. 氯气、纯碱、石灰水\\nC. 水银、空气、干冰\\nD. 二氧化硫、水蒸气、盐酸\",\"orgHeight\":247,\"orgWidth\":714,\"posList\":[[{\"x\":85.35773468017578,\"y\":918.2294921875},{\"x\":799.5465087890625,\"y\":1165.854248046875}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9954187273979187,\"posList\":[[{\"x\":13.827899932861328,\"y\":0.9490765333175659},{\"x\":41.374637603759766,\"y\":32.06136703491211}]]}]},{\"confidence\":0.9999942779541016,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_d86d37181d7b43869159d678e5c30db2.jpg\",\"ocrText\":\"3. 碳酸钠俗名纯碱，下面是采用不同的分类法对纯碱进行的分类，其中正确的是\\n①碱 ②含氧酸盐 ③钠盐 ④碳酸盐\\nA. ①②③\\nB. ①③④\\nC. ①②④\\nD. ②③④\",\"orgHeight\":211,\"orgWidth\":711,\"posList\":[[{\"x\":81.25045776367188,\"y\":1176.5009765625},{\"x\":792.4020385742188,\"y\":1387.826171875}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9858431816101074,\"posList\":[[{\"x\":13.885831832885742,\"y\":3.2968482971191406},{\"x\":41.70942687988281,\"y\":32.71294021606445}]]}]},{\"confidence\":0.9999920725822449,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_9232670d411d4ab3aeb046b88e81ef5c.jpg\",\"ocrText\":\"1. 下列各组物质，按纯净物、单质、碱性氧化物顺序排列的是（ ）\\nA. 烧碱、臭氧、干冰\\nB. 胆矾、白磷、生石灰\\nC. 空气、铁、氧化铁\\nD. 液氧、氨水、熟石灰\",\"orgHeight\":250,\"orgWidth\":717,\"posList\":[[{\"x\":85.9339828491211,\"y\":655.8707885742188},{\"x\":803.1971435546875,\"y\":906.2274169921875}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9988963603973389,\"posList\":[[{\"x\":21.88347816467285,\"y\":4.944057941436768},{\"x\":47.88633728027344,\"y\":33.82516098022461}]]}]},{\"confidence\":0.9999914169311523,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_b98711c9a3744110a0dcd166dcab96d4.jpg\",\"ocrText\":\"5. [2021·浙江余姚中学期中] 下列分散系能产生“丁达尔效应”的是 ( )\\nA. 氢氧化铁胶体\\nB. 稀硫酸\\nC. 饱和食盐水\\nD. 硫酸铜溶液\",\"orgHeight\":248,\"orgWidth\":711,\"posList\":[[{\"x\":75.82592010498047,\"y\":1652.576904296875},{\"x\":787.5960693359375,\"y\":1900.88671875}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9863991141319275,\"posList\":[[{\"x\":10.755365371704102,\"y\":2.8500304222106934},{\"x\":37.90987014770508,\"y\":31.281389236450195}]]}]},{\"confidence\":0.9999885559082031,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_5b7cdb866ad04fe59dacff548a6d4b18.jpg\",\"ocrText\":\"4. 纳米碳是一种粒子直径为1～100 nm 的材料，若将纳米碳均匀地分散到蒸馏水中，所形成的分散系\\n    ( )\\nA. 是一种稳定的溶液\\nB. 能产生丁达尔效应\\nC. 静置后，会析出黑色沉淀\\nD. 属于悬浊液\",\"orgHeight\":246,\"orgWidth\":713,\"posList\":[[{\"x\":77.34265899658203,\"y\":1391.905517578125},{\"x\":790.8412475585938,\"y\":1638.8419189453125}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"NUMBER\",\"confidence\":0.9936126470565796,\"posList\":[[{\"x\":12.358089447021484,\"y\":3.502605676651001},{\"x\":39.878639221191406,\"y\":33.435089111328125}]]}]},{\"confidence\":0.9999840259552002,\"imgUrl\":\"https://www.wy.com/test/summer/2024/12/31/7272953209982279680QUESTION0_38456b34c536470d85ed867c8ad5921e.jpg\",\"ocrText\":\"9. 下列各项中的物质，能满足图1-1-1中阴影部分关系的是（ ）\\n    ( )\\n    \\n    钠盐         钾盐         铵盐\\n    ①            ②            ③            ④\\n    硫酸盐       盐酸盐\\n    图1-1-1\\n    |      | ①           | ②           | ③           | ④           |\\n    |------|--------------|--------------|--------------|--------------|\\n    | A    | NaCl         | K₂SO₄        | KCl          | (NH₄)₂SO₄   |\\n    | B    | NaCl         | K₂SO₄        | KCl          | NH₄Cl        |\\n    | C    | Na₂SO₄       | K₂SO₄        | KCl          | NH₄Cl        |\\n    | D    | Na₂SO₄       | K₂SO₄        | KCl          | (NH₄)₂SO₄   |\",\"orgHeight\":616,\"orgWidth\":711,\"posList\":[[{\"x\":827.7793579101562,\"y\":1260.8353271484375},{\"x\":1538.8447265625,\"y\":1877.38671875}]],\"questionAnalysis\":{\"category\":\"基础题\",\"subQuestionList\":[{\"info\":4,\"type\":\"选择题\"}]},\"subPicList\":[{\"category\":\"PICTURE\",\"confidence\":0.9998953342437744,\"posList\":[[{\"x\":202.5770721435547,\"y\":84.51094055175781},{\"x\":540.5607299804688,\"y\":294.84796142578125}]]},{\"category\":\"NUMBER\",\"confidence\":0.9979044198989868,\"posList\":[[{\"x\":34.71875,\"y\":309.85418701171875},{\"x\":690.1188354492188,\"y\":615.0359497070312}]]}]}]}";


    public static void main(String[] args) {

        QuestionPagePic questionPagePic = JSON.parseObject(str, QuestionPagePic.class);

        // 假设这是你的Question列表
        List<Question> questions = questionPagePic.getQuestionList();

        List<Question> mergedValue = questionAse(questions);


        // 打印排序后的框列表
        mergedValue.forEach(e -> System.out.println(JSON.toJSONString(e)));
        System.out.println("===============");

        //         打印排序后的结果
        mergedValue.forEach(question -> {
            PositionDTO pos = question.getPosList().get(0).get(0);
            System.out.println("Question with x: " + pos.getX() + ", y: " + pos.getY());
        });

        System.out.println("===============");

    }

    /**
     * 对问题进行排序操作
     *
     * @param questions
     * @return
     */
    public static List<Question> questionAse(List<Question> questions) {
        // 分组并排序
        Map<List<Double>, List<Question>> groupedQuestions = new HashMap<>();
        for (Question question : questions) {
            if (question.getPosList() != null && !question.getPosList().isEmpty()) {
                PositionDTO firstPosition = question.getPosList().get(0).get(0);
                // 查找已有的组
                List<Question> matchedGroup = null;
                for (List<Question> group : groupedQuestions.values()) {
                    for (Question q : group) {
                        if (q.getPosList() != null && !q.getPosList().isEmpty() && isSameGroup(firstPosition, q.getPosList().get(0).get(0))) {
                            matchedGroup = group;
                            break;
                        }
                    }
                    if (matchedGroup != null) {
                        break;
                    }
                }
                if (matchedGroup != null) {
                    matchedGroup.add(question);
                } else {
                    List<Question> newGroup = new ArrayList<>();
                    newGroup.add(question);
                    groupedQuestions.put(Arrays.asList(firstPosition.getX()), newGroup);
                }
            }
        }

        // 对每个分组内的Question列表按照y坐标、x坐标顺序进行排序
        for (List<Question> group : groupedQuestions.values()) {
            BoxSorterV2Util.ase(group);
        }

        // 获取所有键值对并按照键的大小排序
        List<Map.Entry<List<Double>, List<Question>>> entries = groupedQuestions.entrySet()
                .stream()
                .sorted((e1, e2) -> {
                    List<Double> key1 = e1.getKey();
                    List<Double> key2 = e2.getKey();
                    // 这里假设按照列表中第一个元素大小排序，如果列表长度不一致等情况，需要额外处理
                    return Double.compare(key1.get(0), key2.get(0));
                })
                .collect(Collectors.toList());

        List<Question> mergedValue = new ArrayList<>();
        for (Map.Entry<List<Double>, List<Question>> entry : entries) {
            mergedValue.addAll(entry.getValue());
        }
        return mergedValue;
    }

    // 判断两个PositionDTO是否属于同一组
    public static boolean isSameGroup(PositionDTO pos1, PositionDTO pos2) {
        return Math.abs(pos1.getX() - pos2.getX()) <= 100;
    }


    /**
     * 输出结果
     *
     * @param groupedQuestions
     */
    public static void printVO(Map<List<Double>, List<Question>> groupedQuestions) {
        // 将排序后的分组重新组合成一个列表
        List<Question> sortedQuestions = new ArrayList<>();
        for (List<Question> group : groupedQuestions.values()) {
            sortedQuestions.addAll(group);
        }


        // 打印排序后的框列表
        sortedQuestions.forEach(e -> System.out.println(JSON.toJSONString(e)));
    }


}